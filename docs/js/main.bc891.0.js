!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),o=i(1),a=i.n(o),s={list:[{id:"1",title:"Finish todo task",description:"Ciklum internship",done:!1,priority:"high"},{id:"2",title:"Master JS and React",description:"finish Udemy courses",done:!1,priority:"normal"},{id:"3",title:"Hello world 101",description:"normal todo",done:!1,priority:"normal"},{id:"4",title:"Hello world",description:"low priority todo",done:!1,priority:"low"}]},d=function(){function t(){r()(this,t);var e=this;this.list=document.querySelector(".todo-list"),this.todoStatus=!1;var i=document.querySelector(".save-todo"),n=document.querySelector(".cancel-todo"),o=document.querySelector(".update-todo"),a=document.querySelector(".searchTodo"),s=document.querySelector(".status"),d=document.querySelector(".priority");i.addEventListener("click",this.addTodo.bind(this)),n.addEventListener("click",this.cancelTodo.bind(this)),o.addEventListener("click",this.updateTodo.bind(this)),a.addEventListener("input",this.handleSearch.bind(this)),s.addEventListener("change",this.handleStatus.bind(this)),d.addEventListener("change",this.handlePriority.bind(this)),document.addEventListener("click",function(t){t.target&&(t.target.classList.contains("button--delete")&&e.removeTodo(t),t.target.classList.contains("button--done")&&e.doneTodo(t),t.target.classList.contains("button--edit")&&(e.showEditModal(t),i.style.display="none",o.style.display="block"),t.target.classList.contains("create-todo")&&(o.style.display="none",i.style.display="block"))}),this.render()}return a()(t,[{key:"render",value:function(){var t=this;if(this.list.innerHTML="",null!==localStorage.getItem("state")){var e=localStorage.getItem("state");s=JSON.parse(e)}s.list.sort(function(t,e){return function(t,e){return(t>e)-(t<e)}(t.done,e.done)}).map(function(e){return t.createDomElements(e.id),t.title.insertAdjacentHTML("afterbegin",e.title),t.description.insertAdjacentHTML("afterbegin",e.description),t.priority.insertAdjacentHTML("afterbegin",e.priority),e.done&&t.li.classList.add("is-done"),t.list.appendChild(t.li),e})}},{key:"renderSearch",value:function(){var t=this;if(this.list.innerHTML="",null!==localStorage.getItem("searchState")){var e=localStorage.getItem("searchState");JSON.parse(e).forEach(function(e){t.createDomElements(e.id),t.title.insertAdjacentHTML("afterbegin",e.title),t.description.insertAdjacentHTML("afterbegin",e.description),t.priority.insertAdjacentHTML("afterbegin",e.priority),e.done&&t.li.classList.add("is-done"),t.list.appendChild(t.li)})}}},{key:"createDomElements",value:function(t){this.li=document.createElement("li"),this.li.classList.add("todo-item"),this.title=document.createElement("h4"),this.title.classList.add("title"),this.description=document.createElement("div"),this.description.classList.add("description"),this.footer=document.createElement("div"),this.footer.classList.add("todo-item__footer"),this.li.appendChild(this.title),this.li.appendChild(this.description),this.li.appendChild(this.footer),this.priority=document.createElement("div"),this.priority.classList.add("priority-box"),this.actionBox=document.createElement("div"),this.actionBox.classList.add("action-box"),this.footer.appendChild(this.priority),this.footer.appendChild(this.actionBox),this.actionBoxMenu=document.createElement("div"),this.actionBoxMenu.classList.add("action-box__menu"),this.actionBoxMenu.innerHTML="...",this.actions=document.createElement("div"),this.actions.classList.add("actions"),this.actionBox.appendChild(this.actionBoxMenu),this.actionBox.appendChild(this.actions),this.done=document.createElement("button"),this.edit=document.createElement("button"),this.delete=document.createElement("button"),this.done.classList.add("button--done","button"),this.edit.classList.add("button--edit","button"),this.delete.classList.add("button--delete","button"),this.done.setAttribute("data-id",t),this.delete.setAttribute("data-id",t),this.edit.setAttribute("data-id",t),this.done.innerHTML="Done",this.edit.innerHTML="Edit",this.delete.innerHTML="Delete",this.actions.appendChild(this.done),this.actions.appendChild(this.edit),this.actions.appendChild(this.delete)}},{key:"addTodo",value:function(){var t=document.querySelector(".modal-wrapper"),e=document.querySelector(".create-input").value,i=document.querySelector(".create-description").value,n=document.querySelector(".create-priority").value;if(!e.trim())return null;var r={id:Date.now().toString(),title:e,description:i,done:!1,priority:n};return s.list.push(r),document.querySelector(".create-input").value="",document.querySelector(".create-description").value="",t.classList.remove("is-active"),localStorage.setItem("state",JSON.stringify(s)),this.render()}},{key:"removeTodo",value:function(t){var e=t.target.getAttribute("data-id");s.list=s.list.filter(function(t){return t.id!==e}),localStorage.setItem("state",JSON.stringify(s)),this.render()}},{key:"cancelTodo",value:function(){document.querySelector(".modal-wrapper").classList.remove("is-active"),document.querySelector(".create-input").value="",document.querySelector(".create-description").value="",this.render()}},{key:"doneTodo",value:function(t){var e=t.target.getAttribute("data-id");s.list=s.list.map(function(t){return t.id===e&&(t.done=!t.done),t}),localStorage.setItem("state",JSON.stringify(s)),document.querySelector(".status").getElementsByTagName("option")[0].selected="selected",document.querySelector(".priority").getElementsByTagName("option")[1].selected="selected",this.render()}},{key:"showEditModal",value:function(t){var e=document.querySelector(".modal-wrapper"),i=t.target.getAttribute("data-id");e.classList.add("is-active"),s.list=s.list.map(function(t){return t.id===i&&(document.querySelector(".create-input").value=t.title,document.querySelector(".create-description").value=t.description,document.querySelector(".update-todo").setAttribute("data-id",i)),t}),this.render()}},{key:"updateTodo",value:function(t){var e=document.querySelector(".modal-wrapper"),i=t.target.getAttribute("data-id"),n=document.querySelector(".create-input").value,r=document.querySelector(".create-description").value,o=document.querySelector(".create-priority").value;s.list=s.list.map(function(t){return t.id===i&&(t.title=n,t.description=r,t.priority=o),t}),localStorage.setItem("state",JSON.stringify(s)),e.classList.remove("is-active"),this.render()}},{key:"handleSearch",value:function(t){var e=t.target.value.toLocaleLowerCase();document.querySelector(".priority").getElementsByTagName("option")[1].selected="selected";var i=s.list.filter(function(t){return t.title.toLowerCase().includes(e)}).map(function(t){return t});localStorage.setItem("searchState",JSON.stringify(i)),this.renderSearch()}},{key:"handleStatus",value:function(t){var e=t.target.value;if(document.querySelector(".priority").getElementsByTagName("option")[1].selected="selected","done"===e){var i=s.list.filter(function(t){return!0===t.done}).map(function(t){return t});this.todoStatus=!0,localStorage.setItem("searchState",JSON.stringify(i)),this.renderSearch()}"open"===e&&(this.todoStatus=!1,this.render())}},{key:"handlePriority",value:function(t){var e,i=t.target.value;e=this.todoStatus?s.list.filter(function(t){return t.priority===i&&!0===t.done}).map(function(t){return t}):s.list.filter(function(t){switch(i){case"high":return t.priority===i;case"normal":return t;case"low":return t.priority===i;default:return t}}).map(function(t){return t}),localStorage.setItem("searchState",JSON.stringify(e)),this.renderSearch()}}]),t}(),c=document.querySelector(".modal-wrapper"),l=document.querySelector(".create-todo"),u=document.querySelector("body");l.addEventListener("click",function(){c.classList.add("is-active")}),u.addEventListener("click",function(t){t.target===c&&c.classList.remove("is-active")});new d,i(2)}]);